# Wanderlust - Туристическое агентство

Django проект для туристического агентства.

## Требования

- Python 3.8+
- pip

## Установка и запуск

### 1. Активация виртуального окружения

Если виртуальное окружение еще не создано:
```bash
python -m venv venv
```

Активация виртуального окружения:

**Windows (PowerShell):**
```powershell
.\venv\Scripts\Activate.ps1
```

**Windows (CMD):**
```cmd
venv\Scripts\activate.bat
```

**Linux/Mac:**
```bash
source venv/bin/activate
```

### 2. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 3. Применение миграций

```bash
python manage.py migrate
```

### 4. Создание суперпользователя (опционально)

Для доступа к админ-панели:
```bash
python manage.py createsuperuser
```

### 5. Запуск сервера разработки

```bash
python manage.py runserver
```

После запуска сервер будет доступен по адресу: **http://127.0.0.1:8000/**

- Главная страница: http://127.0.0.1:8000/
- Админ-панель: http://127.0.0.1:8000/admin/
- API: http://127.0.0.1:8000/api/

## Структура проекта

- `agency/` - основное приложение с турами и страницами
- `api_shop/` - REST API для работы с турами
- `templates/` - HTML шаблоны
- `static/` - статические файлы (CSS, изображения)
- `media/` - загружаемые файлы (изображения туров, баннеры)

## Работа с API

### Доступ к API

API использует Django REST Framework и требует аутентификации. Есть несколько способов доступа:

#### 1. Через браузер (сессионная аутентификация)

1. Войдите в систему на главной странице: http://127.0.0.1:8000/login/
2. После входа откройте любой эндпоинт API в браузере

#### 2. Через HTTP-запросы (с аутентификацией)

Для работы с API через HTTP-клиенты (Postman, curl, Python requests) вам нужно:
- Либо использовать сессионные cookies после входа
- Либо настроить токен-аутентификацию (требует дополнительной настройки)

### Доступные эндпоинты API

Все эндпоинты доступны по адресу: `http://127.0.0.1:8000/api/`

- **Туры:** `http://127.0.0.1:8000/api/tour/`
  - GET - получить список туров
  - POST - создать новый тур
  - GET `/api/tour/{id}/` - получить конкретный тур
  - PUT/PATCH `/api/tour/{id}/` - обновить тур
  - DELETE `/api/tour/{id}/` - удалить тур

- **Категории:** `http://127.0.0.1:8000/api/category/`
- **Предложения:** `http://127.0.0.1:8000/api/offer/`
- **Элементы корзины:** `http://127.0.0.1:8000/api/cartItem/`
- **Профиль пользователя:** `http://127.0.0.1:8000/api/userProfile/`
- **Страницы:**
  - `http://127.0.0.1:8000/api/homePage/`
  - `http://127.0.0.1:8000/api/aboutPage/`
  - `http://127.0.0.1:8000/api/contactPage/`
  - `http://127.0.0.1:8000/api/findUsPage/`
  - `http://127.0.0.1:8000/api/toursPage/`
  - `http://127.0.0.1:8000/api/cartPage/`

### Примеры использования API

**Получить список туров (через браузер после входа):**
```
http://127.0.0.1:8000/api/tour/
```

**Получить конкретный тур:**
```
http://127.0.0.1:8000/api/tour/1/
```

**Создать новый тур (POST запрос):**
```json
POST http://127.0.0.1:8000/api/tour/
Content-Type: application/json

{
  "name": "Новый тур",
  "description": "Описание тура",
  "price": 50000,
  "category": 1
}
```

**Примечание:** Для выполнения POST, PUT, PATCH, DELETE запросов нужны соответствующие разрешения Django. Суперпользователь имеет все разрешения по умолчанию.

## Примечания

- База данных настроена на SQLite (файл `db.sqlite3`)
- Для продакшена рекомендуется использовать PostgreSQL или MySQL
- Статические файлы собираются в папку `staticfiles/`
- API требует аутентификации и соответствующих разрешений Django

